# Development-only Wrangler Configuration
# This config skips the frontend build for faster development

name = "d1-manager"
main = "worker/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]

# Smart Placement disabled for SPA - UI responsiveness priority
placement = { mode = "off" }

# No build command for development - frontend runs separately on Vite
# [build]
# command = "npm run build"
# cwd = "."

# Assets served by Vite dev server (localhost:5173) during development
# [assets]
# directory = "dist"
# binding = "ASSETS"

# Metadata D1 database for query history and saved queries
[[d1_databases]]
binding = "METADATA"
database_name = "d1-manager-metadata-dev"
database_id = "dev-metadata-id"
preview_database_id = "dev-metadata-id"

# R2 bucket for backups (local dev uses mock)
[[r2_buckets]]
binding = "BACKUP_BUCKET"
bucket_name = "d1-manager-backups-dev"

# Durable Objects for async backup operations
[[durable_objects.bindings]]
name = "BACKUP_DO"
class_name = "BackupDO"
script_name = "d1-manager"

[[migrations]]
tag = "v2_backup_do"
new_classes = ["BackupDO"]

[observability.logs]
enabled = true

