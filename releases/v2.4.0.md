# D1 Manager v2.4.0 Release Notes

**Release Date:** January 13, 2026  
**Status:** Stable  
**Type:** Feature Release

---

## ğŸš€ Overview

Version 2.4.0 introduces **Schema Comparison with Migration Script Generation**, enabling users to compare two databases and generate executable SQL migration scripts.

---

## âœ¨ Features

### ğŸ”„ Schema Comparison with Migration Script Generation

Enhanced the Database Comparison feature with full migration capabilities:

- **Full Schema Comparison**: Compare tables, columns, indexes, foreign keys, and triggers between two databases
- **SQL Migration Script Generation**: Generate executable migration scripts from schema differences
- **Risk Classification**: Visual indicators (safe/warning/danger) for each migration step
- **Multiple Export Options**: Copy to clipboard or download as `.sql` file
- **Apply Migration**: Execute migrations directly against target database with confirmation
- **Idempotent Apply**: Automatically skips ADD COLUMN for columns that already exist
- **SQLite-Aware**: Handles SQLite-specific constraints (table recreation for column modifications)
- **New API Endpoint**: `GET /api/tables/:dbId/schema-full` for comprehensive schema introspection

---

## ğŸ› Bug Fixes

- **Local Development Server**: Fixed "Cannot read properties of undefined (reading 'fetch')" error when running `npx wrangler dev --config wrangler.dev.toml`

---

## ğŸ”’ Security

- **Documented** CVE-2026-22184 (zlib buffer overflow in untgz) - NOT EXPLOITABLE (D1 Manager does not use untgz utility)

---

## ğŸ“¦ Dependencies

- **@types/node**: Updated 25.0.7 â†’ 25.0.8
- **wrangler**: Updated 4.58.0 â†’ 4.59.1
- **@cloudflare/workers-types**: Updated 4.20260111.0 â†’ 4.20260113.0
- **@babel/core**: Updated 7.28.5 â†’ 7.28.6
- **diff**: Updated 8.0.2 â†’ 8.0.3
- **esbuild**: Held at 0.25.12 (pinned for Wrangler compatibility)

---

## ğŸ“¦ Upgrade Instructions

1. **Pull the latest changes**:
   ```bash
   git pull origin master
   ```

2. **Update dependencies**:
   ```bash
   npm install
   ```

3. **Deploy the Worker**:
   ```bash
   npm run build
   npx wrangler deploy
   ```

---

## ğŸ“š Documentation

- **[Changelog](https://github.com/neverinfamous/d1-manager/wiki/Changelog)** â€” Detailed list of changes
- **[Wiki](https://github.com/neverinfamous/d1-manager/wiki)** â€” Complete documentation

---

**Made with â¤ï¸ for the Cloudflare community**
