# D1 Manager v2.1.0 Release Notes

**Release Date:** January 7, 2026  
**Status:** Stable  
**Type:** Feature Release

---

## üöÄ Overview

Version 2.1.0 introduces **AI Search Integration** for semantic search over database schemas and data, a **Health Dashboard** for at-a-glance system health monitoring, and an expanded **13-Event Webhook Engine** for comprehensive external integrations. This release also includes significant CI/CD improvements with explicit Docker gating and Dependabot dependency grouping.

---

## ‚ú® Features

### üîç AI Search Integration

- **Semantic Search**: Query database schemas and data using natural language via Cloudflare AI Search (AutoRAG)
- **D1‚ÜíR2 Connector Pattern**: Export database content as markdown for AI indexing
  - Export formats: `schema.md`, `tables/{name}.md`, `relationships.md`, `data/{name}.md`
- **Compatibility Analysis**: Table count, row count, estimated export size, last export timestamp
- **One-Click Export**: Export to R2 with progress tracking
- **AI Search Instance Management**: List instances, trigger sync/re-index
- **Dual Search Modes**:
  - Semantic search (vector similarity)
  - AI-powered search (with generated response and streaming support)
- **Mock Data Support**: Full functionality in local development
- **Requires**: `[ai]` binding and `BACKUP_BUCKET` in wrangler.toml

### üìä Health Dashboard

- **Health Score**: 0-100 score calculated from backup coverage, job failures, and replication status
- **Summary Cards**: Database count, total storage, scheduled backups, recent jobs
- **Backup Coverage Alerts**: Identify databases without scheduled backups
- **Failed Backup Tracking**: View failed backups with schedule ID and failure time
- **Replication Status Overview**: Databases with/without read replication
- **2-Minute Cache TTL**: Matches Metrics Dashboard for consistent performance
- **Navigation**: New tab between Metrics and Webhooks

### üîî 13-Event Webhook Engine

Streamlined webhook events for cleaner external integrations:

**New Events:**

- `table_create`, `table_delete`, `table_update`
- `backup_complete`, `restore_complete`
- `import_complete`, `export_complete`
- `bulk_delete_complete`, `schema_change`

**Organization:**

- Events organized into categories: Database Lifecycle, Table DDL, R2 Snapshots, Data Transfer, Bulk Operations, Job Lifecycle
- Backward-compatible aliases for `database_export` and `database_import`
- Aligned with KV Manager webhook architecture for fleet consistency

### ‚ö†Ô∏è FTS5 Warning for Scheduled Backups

- **Visual Warning**: Displays when configuring scheduled backups for databases with FTS5 tables
- **Warning Badge**: Shows FTS5 table count in the scheduled backup configuration dialog
- **Guidance**: Explains that FTS5 tables can cause longer export times and potential timeouts
- **Non-Blocking**: Users can still proceed; suggests manual backups as alternative

---

## üîß Technical Improvements

### CI/CD Enhancements

- **Explicit Docker Gating**: Docker image publishing now gated on lint and CodeQL verification
  - Added `lint` prerequisite job (ESLint, frontend build, worker dry-run)
  - Added `codeql` prerequisite job for security analysis
  - `build-platform` job requires both `lint` and `codeql` to pass
- **Dependabot Configuration**: Added `.github/dependabot.yml` with dependency grouping
  - 8 npm dependency groups: vitest, eslint, types, ui-frameworks, cloudflare, react, vite, tanstack
  - github-actions ecosystem with actions grouping
  - docker ecosystem for base image updates
  - Weekly schedule (Mondays at 9:00 AM ET)
- **GitHub Actions Updates**:
  - `actions/checkout`: v5 ‚Üí v6
  - `actions/upload-artifact`: v4 ‚Üí v6
  - `actions/download-artifact`: v4 ‚Üí v7

### Security Updates

- **jspdf Update**: Updated from 3.0.4 to 4.0.0 to address Local File Inclusion/Path Traversal vulnerability
  - D1 Manager uses jspdf in browser context (unaffected), but update applied as best practice
- **CVE-2025-64756 (glob)**: Added `"glob": "^11.1.0"` to overrides to force patched version
  - Prevents potential command injection via glob CLI

### Dependencies

- **ESLint Group**: `eslint` 9.36.0 ‚Üí 9.39.2, `eslint-plugin-react-refresh` 0.4.14 ‚Üí 0.4.26, `typescript-eslint` 8.50.1 ‚Üí 8.52.0, `globals` 16.4.0 ‚Üí 17.0.0
- **Types Group**: `@types/node` 24.9.1 ‚Üí 24.9.3, `@types/react` 19.2.2 ‚Üí 19.2.3, `@types/react-dom` 19.2.2 ‚Üí 19.2.3
- **sql-formatter**: 15.6.10 ‚Üí 15.6.12

---

## üé® UI/UX Changes

### TailwindCSS v4 Migration

- Migrated from TailwindCSS 3.4.19 to 4.1.17
- Replaced `tailwindcss` PostCSS plugin with `@tailwindcss/postcss`
- Added `@tailwindcss/vite` for Vite integration
- CSS-first configuration using `@import "tailwindcss"` and `@theme` blocks
- Removed `tailwindcss-animate` (incompatible with v4) - animations now in `@theme` block
- Removed `autoprefixer` (built into Tailwind v4)

---

## üêõ Bug Fixes

- **React Version Mismatch**: Fixed React error #527 by aligning `react-dom` (19.2.1 ‚Üí 19.2.3) to match `react` version
- **Scheduled Backups Cron**: Added missing cron trigger configuration in `wrangler.toml`
- **Backup Timeout**: Increased backup export timeout from 2 to 6 minutes for larger databases
- **Build Optimization**: Replaced 2MB Vite placeholder favicon with inline SVG data URI (~200 bytes)
- **TypeScript Fix**: Fixed `getOrdinalSuffix` function returning `string | undefined`

---

## üì¶ Upgrade Instructions

1. **Pull the latest changes**:

   ```bash
   git pull origin main
   ```

2. **Update dependencies**:

   ```bash
   npm install
   ```

3. **Deploy the Worker**:

   ```bash
   npm run build
   npx wrangler deploy
   ```

4. **For AI Search** (optional): Add the `[ai]` binding to your `wrangler.toml`:
   ```toml
   [ai]
   binding = "AI"
   ```

---

## üìö Documentation

- **[Changelog](https://github.com/neverinfamous/d1-manager/wiki/Changelog)** ‚Äî Detailed list of changes
- **[Wiki](https://github.com/neverinfamous/d1-manager/wiki)** ‚Äî Updated guides including new AI Search page
- **[Webhooks](https://github.com/neverinfamous/d1-manager/wiki/Webhooks)** ‚Äî Complete rewrite for 13-event engine

---

**Made with ‚ù§Ô∏è for the Cloudflare community**
