# D1 Manager v1.0.0 Release Notes

**Release Date:** November 2, 2025  
**Status:** Production/Stable  
**Type:** Initial Release

---

## ðŸš€ Overview

We're excited to announce the first stable release of **D1 Database Manager** - a modern, full-featured web application for managing Cloudflare D1 databases with enterprise-grade authentication. This release represents months of development and testing, bringing powerful database management capabilities beyond the standard Cloudflare dashboard.

**ðŸŽ¯ [Live Demo](https://d1.adamic.tech/)** | **ðŸ³ [Docker Hub](https://hub.docker.com/r/writenotenow/d1-manager)** | **ðŸ“¦ [GitHub](https://github.com/neverinfamous/d1-manager)**

---

## âœ¨ Major Features

### Database Management
- **Complete CRUD Operations** - List, create, rename, and delete D1 databases
- **Migration-Based Renaming** - Safe database renaming with automatic export/import and rollback
- **Database Metadata** - View created date, size, and table count for each database
- **Bulk Operations** - Multi-select databases for batch operations
  - Bulk Download (ZIP archive of SQL dumps)
  - Bulk Delete with progress tracking
  - Bulk Optimize (ANALYZE operations)
- **Upload/Import** - Import SQL files up to 5GB to create or update databases
- **Protected System Database** - Automatic protection of `d1-manager-metadata` internal database

### Advanced Table Operations
- **Complete Table Management** - Browse, create, rename, delete, and clone tables
- **Visual Schema Designer** - Intuitive table creation with column builder
  - Define column names and types (TEXT, INTEGER, REAL, BLOB, NUMERIC)
  - Set primary keys and NOT NULL constraints
  - Add default values
  - Live SQL preview with validation
- **Table Data Browser** - Paginated data viewing (50 rows per page)
- **Bulk Table Operations** - Multi-select for efficient batch processing
  - Bulk Clone with custom naming
  - Bulk Export (SQL/CSV formats in ZIP archives)
  - Bulk Delete with dependency analysis
- **Schema Information** - Detailed column information with types, constraints, and indexes

### Column Management
- **Add Column** - Add new columns with type, constraints, and default values
- **Rename Column** - Fast column renaming using `ALTER TABLE RENAME COLUMN`
- **Modify Column** - Change column type, NOT NULL constraints, and defaults
- **Drop Column** - Remove columns using `ALTER TABLE DROP COLUMN`
- **Always-Visible Actions** - Action buttons visible on each column row
- **Data Migration** - Automatic data migration during schema modifications
- **Index Preservation** - Indexes maintained during operations

### Row-Level Filtering
- **Type-Aware Operators** - Smart filtering based on column data types
  - TEXT: contains, equals, not equals, starts with, ends with
  - INTEGER/REAL: =, >, <, â‰¥, â‰¤
  - NULL: is null, is not null
- **Filter Bar UI** - Inline filters above table with one input per column
- **URL Persistence** - Filters stored in query parameters for shareable filtered views
- **SQL Injection Protection** - Proper escaping and parameterization
- **Server-Side Execution** - Efficient SQL WHERE clause generation

### Foreign Key Dependencies
- **Dependency Viewer** - Comprehensive foreign key relationship analysis before deletion
- **Outbound Dependencies** - Shows tables that this table references
- **Inbound Dependencies** - Shows tables that reference this table
- **Cascade Behavior Display** - ON DELETE actions (CASCADE, RESTRICT, SET NULL, NO ACTION)
- **Row Count Estimates** - Impact assessment showing affected row counts
- **Mandatory Confirmation** - Required acknowledgment checkbox when dependencies exist
- **Color-Coded Warnings** - CASCADE (yellow), RESTRICT (red), SET NULL (blue)

### SQL Query Console
- **Custom Query Execution** - Execute any SQL query with syntax highlighting
- **Results Display** - Formatted table output with column headers and execution metrics
- **Keyboard Shortcuts** - Ctrl+Enter (Cmd+Enter on Mac) to execute queries
- **Skip Validation** - Optional bypass for DROP/DELETE operations
- **Query Management** - Save and load frequently used queries
- **CSV Export** - Export query results directly to CSV files
- **Query History** - Automatic execution history tracking

### User Experience
- **Modern UI** - Beautiful interface built with shadcn/ui components and Tailwind CSS
- **Theme Support** - Dark, Light, and System-aware themes with persistence
- **Responsive Design** - Works seamlessly on desktop, tablet, and mobile devices
- **Intuitive Navigation** - Seamless navigation between databases, tables, and query console
- **Search & Filter** - Search tables by name in database view
- **Progress Tracking** - Real-time progress indicators for long-running operations
- **Error Handling** - Comprehensive error reporting with user-friendly messages

---

## ðŸ”§ Technical Stack

### Frontend
- **React 19.2.0** - Latest React with improved performance and features
- **TypeScript 5.9.3** - Strict type safety throughout the application
- **Vite 7.1.12** - Lightning-fast build tool and dev server
- **Tailwind CSS 3.4.18** - Utility-first CSS framework
- **shadcn/ui** - High-quality, accessible component library
- **Lucide React** - Beautiful icon library

### Backend
- **Cloudflare Workers** - Serverless edge compute for global performance
- **Cloudflare D1** - SQLite-compatible serverless database
- **Cloudflare Access (Zero Trust)** - Enterprise-grade authentication with JWT validation
- **TypeScript 5.9.3** - Type-safe API development

---

## ðŸš€ Deployment Options

### Cloudflare Workers (Production)
- Workers.dev subdomain for immediate deployment
- Custom domain support
- Zero Trust Integration with GitHub OAuth and other identity providers
- Edge deployment for global distribution
- Automatic scaling

### Docker Container
- **Multi-Architecture Support** - `linux/amd64` and `linux/arm64`
- **Docker Hub** - Available at `writenotenow/d1-manager:latest`
- **Container Size** - ~150MB compressed
- **Health Checks** - Built-in `/health` endpoint
- **Security Hardened** - Non-root user, minimal Alpine base
- **Docker Compose Ready** - Example configurations included
- **Kubernetes Support** - Deployment manifests and secrets management

### Local Development
- No Authentication - Auth bypassed for localhost
- Mock Data - Sample databases, tables, and query results
- No Secrets Required - Works without Cloudflare API keys
- Hot Module Replacement - Frontend and backend auto-reload
- Full UI Testing - All features testable without production setup

---

## ðŸ” Security Features

### Authentication & Authorization
- Cloudflare Access Integration with Zero Trust authentication
- JWT validation on all API requests
- Session management with automatic token refresh
- Support for GitHub OAuth, Google, Azure AD, and more

### API Security
- CORS protection with proper origin validation
- SQL injection prevention with parameterized queries
- Secure secret storage with Wrangler

### Container Security
- Non-root execution as unprivileged `node` user
- Minimal Alpine Linux base image
- Environment-based secrets with no hardcoded credentials
- Docker Secrets support for Swarm and Kubernetes

---

## ðŸ“‹ API Endpoints

### Databases
- `GET /api/databases` - List all databases
- `POST /api/databases` - Create new database
- `POST /api/databases/:dbId/rename` - Rename database
- `DELETE /api/databases/:dbId` - Delete database
- `GET /api/databases/:dbId/info` - Get database information
- `POST /api/databases/export` - Export multiple databases
- `POST /api/databases/import` - Import SQL file

### Tables
- `GET /api/tables/:dbId/list` - List all tables
- `GET /api/tables/:dbId/schema/:tableName` - Get table schema
- `GET /api/tables/:dbId/data/:tableName` - Get table data with pagination/filtering
- `GET /api/tables/:dbId/indexes/:tableName` - Get table indexes
- `GET /api/tables/:dbId/dependencies` - Get foreign key dependencies
- `POST /api/tables/:dbId/create` - Create new table
- `DELETE /api/tables/:dbId/:tableName` - Drop table
- `PATCH /api/tables/:dbId/:tableName/rename` - Rename table
- `POST /api/tables/:dbId/:tableName/clone` - Clone table
- `GET /api/tables/:dbId/:tableName/export` - Export table (SQL/CSV)

### Column Operations
- `POST /api/tables/:dbId/:tableName/columns/add` - Add column
- `PATCH /api/tables/:dbId/:tableName/columns/:columnName/rename` - Rename column
- `PATCH /api/tables/:dbId/:tableName/columns/:columnName/modify` - Modify column
- `DELETE /api/tables/:dbId/:tableName/columns/:columnName` - Drop column

### Queries
- `POST /api/query/:dbId/execute` - Execute SQL query
- `POST /api/query/:dbId/batch` - Execute batch queries
- `GET /api/query/:dbId/history` - Get query history

---

## ðŸ“¦ Quick Start

### Local Development
```bash
# Clone repository
git clone https://github.com/neverinfamous/d1-manager.git
cd d1-manager

# Install dependencies
npm install

# Copy environment file
cp .env.example .env

# Terminal 1 - Frontend
npm run dev

# Terminal 2 - Worker API
npx wrangler dev --config wrangler.dev.toml --local

# Access at http://localhost:5173
```

### Docker
```bash
docker pull writenotenow/d1-manager:latest

docker run -d \
  -p 8080:8080 \
  -e ACCOUNT_ID=your_cloudflare_account_id \
  -e API_KEY=your_cloudflare_api_token \
  -e TEAM_DOMAIN=https://yourteam.cloudflareaccess.com \
  -e POLICY_AUD=your_cloudflare_access_aud_tag \
  --name d1-manager \
  writenotenow/d1-manager:latest

# Access at http://localhost:8080
```

---

## ðŸ› Known Limitations

- **Database Renaming** - Uses migration approach (export/import) as D1 doesn't support native renaming
- **DEFAULT Values** - Complex default expressions not preserved during column modification
- **VACUUM Operation** - Not available via D1 REST API; use Wrangler CLI directly
- **Large File Imports** - For files larger than 5GB, use Wrangler CLI directly

---

## ðŸ“Š Statistics

- **Total Components:** 50+
- **API Endpoints:** 25+
- **Lines of Code:** 10,000+
- **Docker Image Size:** ~150MB
- **Supported Platforms:** Web, Docker, Kubernetes
- **Browser Support:** Chrome, Firefox, Safari, Edge

---

## ðŸŽ¯ v1.0.0 Highlights

âœ… **Complete Database Management** - Full CRUD with migration-based renaming  
âœ… **Advanced Table Operations** - Visual schema designer and bulk operations  
âœ… **Column Management** - Add, rename, modify, and delete columns  
âœ… **Foreign Key Analysis** - Comprehensive dependency viewer  
âœ… **Row-Level Filtering** - Type-aware filters with URL persistence  
âœ… **SQL Query Console** - Execute queries with history and CSV export  
âœ… **Enterprise Authentication** - Cloudflare Access with Zero Trust  
âœ… **Docker Support** - Multi-architecture containers with health checks  
âœ… **Modern UI/UX** - Dark/Light themes, responsive design  
âœ… **Production Ready** - Tested, documented, and deployed  

---

## ðŸ“š Documentation

- **[README.md](https://github.com/neverinfamous/d1-manager)** - Main documentation with quick start
- **[DOCKER_README.md](https://github.com/neverinfamous/d1-manager/blob/main/DOCKER_README.md)** - Docker deployment guide
- **[SECURITY.md](https://github.com/neverinfamous/d1-manager/blob/main/SECURITY.md)** - Security policy

---

## ðŸ™ Acknowledgments

Special thanks to:
- **Cloudflare** - For D1, Workers, and Zero Trust platform
- **React Team** - For React 19 and excellent documentation
- **shadcn** - For the beautiful UI component library
- **Vite Team** - For the blazing-fast build tool
- **Community Contributors** - For feedback, bug reports, and suggestions

---

**Made with â¤ï¸ for the Cloudflare community**
